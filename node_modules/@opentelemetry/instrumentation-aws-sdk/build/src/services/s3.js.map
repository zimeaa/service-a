{"version":3,"file":"s3.js","sourceRoot":"","sources":["../../../src/services/s3.ts"],"names":[],"mappings":";;;AAAA;;;;;;;;;;;;;;GAcG;AACH,4CAA0D;AAC1D,oCAA0C;AAI1C,MAAa,kBAAkB;IAC7B,kBAAkB,CAChB,OAA0B,EAC1B,OAAoC;QAEpC,MAAM,UAAU,GAAG,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC;QAChD,MAAM,QAAQ,GAAa,cAAQ,CAAC,MAAM,CAAC;QAC3C,MAAM,cAAc,GAAe,EAAE,CAAC;QAEtC,IAAI,UAAU,EAAE;YACd,cAAc,CAAC,sBAAc,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC;SAC3D;QAED,MAAM,UAAU,GAAG,KAAK,CAAC;QAEzB,OAAO;YACL,UAAU;YACV,cAAc;YACd,QAAQ;SACT,CAAC;IACJ,CAAC;CACF;AArBD,gDAqBC","sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Attributes, SpanKind } from '@opentelemetry/api';\nimport { AttributeNames } from '../enums';\nimport { AwsSdkInstrumentationConfig, NormalizedRequest } from '../types';\nimport { RequestMetadata, ServiceExtension } from './ServiceExtension';\n\nexport class S3ServiceExtension implements ServiceExtension {\n  requestPreSpanHook(\n    request: NormalizedRequest,\n    _config: AwsSdkInstrumentationConfig\n  ): RequestMetadata {\n    const bucketName = request.commandInput?.Bucket;\n    const spanKind: SpanKind = SpanKind.CLIENT;\n    const spanAttributes: Attributes = {};\n\n    if (bucketName) {\n      spanAttributes[AttributeNames.AWS_S3_BUCKET] = bucketName;\n    }\n\n    const isIncoming = false;\n\n    return {\n      isIncoming,\n      spanAttributes,\n      spanKind,\n    };\n  }\n}\n"]}